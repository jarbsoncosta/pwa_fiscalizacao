import{j as e,r as g}from"./index-DQnn4OZc.js";import{M as f,P as j,o as N,r as c,T as w}from"./TileLayer-D53SBd-y.js";delete c.Icon.Default.prototype._getIconUrl;c.Icon.Default.mergeOptions({iconRetinaUrl:"/icons/marker-icon-2x.png",iconUrl:"/icons/marker-icon.png",shadowUrl:"/icons/marker-shadow.png"});const M=n=>new c.Icon({iconUrl:`/${n}.png`,shadowUrl:"/icons/marker-shadow.png",iconAnchor:[12,41]});function U({targets:n}){const r=N();return g.useEffect(()=>{if(!n||n.length===0)return;const o=n.map(s=>{const t=parseFloat(s.latitude),a=parseFloat(s.longitude);return isNaN(t)||isNaN(a)?null:[t,a]}).filter(Boolean);o.length>0&&r.fitBounds(o,{padding:[50,50],maxZoom:15,animate:!0})},[n,r]),null}function E({target:n}){const{latitude:r,longitude:o,empresa:s,numeroArt:t,enderecoObra:a,telefoneProprietario:u,status:d}=n,l=parseFloat(r),i=parseFloat(o);if(isNaN(l)||isNaN(i))return null;const p=d?.trim().toUpperCase(),m=p==="CONCLU√çDA"?"green":["EM ANDAMENTO","EM ATENDIMENTO"].includes(p)?"yellow":"gray",h=M(m),x=`https://www.google.com/maps?q=${l},${i}`;return e.jsx(f,{position:[l,i],icon:h,children:e.jsx(j,{children:e.jsxs("div",{className:"text-sm",children:[e.jsx("h3",{className:"font-semibold",children:s}),e.jsxs("p",{children:[e.jsx("strong",{children:"ART:"})," ",t]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Endere√ßo:"})," ",a]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Telefone:"})," ",u]}),e.jsx("p",{className:"mt-2",children:e.jsx("a",{href:x,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline text-xs",children:"üåç Ver no Google Maps"})})]})})})}function I({targets:n}){return e.jsxs(e.Fragment,{children:[e.jsx(w,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'¬© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>'}),n.map(r=>e.jsx(E,{target:r},`marker-${r.id}`)),e.jsx(U,{targets:n})]})}export{I as default};
